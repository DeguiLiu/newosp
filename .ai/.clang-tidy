---
# Embedded C++17 clang-tidy configuration
# Target: ARM-Linux, -fno-exceptions -fno-rtti, header-only library
# CI scope: include/osp/ only (tests and examples excluded)

Checks: >
  -*,
  bugprone-*,
  -bugprone-chained-comparison,
  -bugprone-easily-swappable-parameters,
  -bugprone-exception-escape,
  -bugprone-unhandled-exception-at-new,
  cert-*,
  -cert-err58-cpp,
  -cert-err60-cpp,
  clang-analyzer-core.*,
  clang-analyzer-cplusplus.*,
  clang-analyzer-deadcode.*,
  concurrency-mt-unsafe,
  cppcoreguidelines-init-variables,
  cppcoreguidelines-misleading-capture-default-by-value,
  cppcoreguidelines-narrowing-conversions,
  cppcoreguidelines-no-malloc,
  cppcoreguidelines-prefer-member-initializer,
  cppcoreguidelines-pro-type-cstyle-cast,
  cppcoreguidelines-pro-type-member-init,
  cppcoreguidelines-slicing,
  google-build-using-namespace,
  google-explicit-constructor,
  google-readability-casting,
  misc-redundant-expression,
  misc-static-assert,
  misc-unconventional-assign-operator,
  misc-unused-parameters,
  modernize-deprecated-headers,
  modernize-loop-convert,
  modernize-redundant-void-arg,
  modernize-use-bool-literals,
  modernize-use-default-member-init,
  modernize-use-emplace,
  modernize-use-equals-default,
  modernize-use-equals-delete,
  modernize-use-nodiscard,
  modernize-use-noexcept,
  modernize-use-nullptr,
  modernize-use-override,
  modernize-use-using,
  performance-*,
  -performance-avoid-endl,
  readability-container-size-empty,
  readability-else-after-return,
  readability-implicit-bool-conversion,
  readability-make-member-function-const,
  readability-misleading-indentation,
  readability-non-const-parameter,
  readability-redundant-control-flow,
  readability-simplify-boolean-expr,
  readability-static-accessed-through-instance

# Only check project headers, exclude third-party and system headers
HeaderFilterRegex: 'include/osp/'

# Strict mode: upgrade critical checks to errors
WarningsAsErrors: >
  bugprone-use-after-move,
  bugprone-dangling-handle,
  bugprone-infinite-loop,
  cppcoreguidelines-no-malloc

FormatStyle: file

CheckOptions:
  # --- Embedded-specific tuning ---
  - key: modernize-use-noexcept.ReplacementString
    value: 'noexcept'
  - key: performance-move-const-arg.CheckTriviallyCopyableMove
    value: 'true'
  - key: bugprone-narrowing-conversions.WarnOnIntegerNarrowingConversion
    value: 'true'
  - key: bugprone-narrowing-conversions.WarnOnFloatingPointNarrowingConversion
    value: 'true'
...
